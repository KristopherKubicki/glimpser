<!-- app/templates/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Glimpser Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</head>
<body>
	<header>
	{% include 'nav.html' %}
	</header>

<details>
    <summary>Add Template</summary>
    <div id="template-form" style="background-color: #222; padding: 20px; border-radius: 10px; max-width: 600px; margin: 20px auto;">
        <h3 style="color: #fff; text-align: center; margin-bottom: 20px;">Add Template</h3>
        <form id="add-template-form" action="/templates" method="post" onsubmit="return validateForm()">
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 10px; margin-bottom: 20px;">
                <label for="name" style="color: #fff;">Template Name:</label>
                <input type="text" id="name" name="name" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;" required>

                <label for="url" style="color: #fff;">URL:</label>
                <input type="url" id="url" name="url" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;" required>

                <label for="frequency" style="color: #fff;">Frequency (minutes):</label>
                <input type="number" id="frequency" name="frequency" value="30" min="1" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;" required>

                <label for="timeout" style="color: #fff;">Timeout (seconds):</label>
                <input type="number" id="timeout" name="timeout" value="10" min="1" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;" required>

                <label for="notes" style="color: #fff;">Notes:</label>
                <textarea id="notes" name="notes" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;"></textarea>

                <label for="object_filter" style="color: #fff;">Object Filter:</label>
                <input type="text" id="object_filter" name="object_filter" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="object_confidence" style="color: #fff;">Object Confidence:</label>
                <input type="number" id="object_confidence" name="object_confidence" min="0" max="1" step="0.01" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="popup_xpath" style="color: #fff;">Popup XPath:</label>
                <input type="text" id="popup_xpath" name="popup_xpath" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="dedicated_xpath" style="color: #fff;">Dedicated XPath:</label>
                <input type="text" id="dedicated_xpath" name="dedicated_xpath" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="callback_url" style="color: #fff;">Callback URL:</label>
                <input type="url" id="callback_url" name="callback_url" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="proxy" style="color: #fff;">Proxy:</label>
                <input type="text" id="proxy" name="proxy" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="groups" style="color: #fff;">Groups:</label>
                <input type="text" id="groups" name="groups" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

                <label for="rollback_frames" style="color: #fff;">Rollback Frames:</label>
                <input type="number" id="rollback_frames" name="rollback_frames" value="0" min="0" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
            </div>

            <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
                <label for="invert" style="color: #fff;">
                    <input type="checkbox" id="invert" name="invert"> Invert
                </label>
                <label for="dark" style="color: #fff;">
                    <input type="checkbox" id="dark" name="dark" checked> Dark Mode
                </label>
                <label for="headless" style="color: #fff;">
                    <input type="checkbox" id="headless" name="headless" checked> Headless
                </label>
                <label for="stealth" style="color: #fff;">
                    <input type="checkbox" id="stealth" name="stealth"> Stealth
                </label>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <input type="submit" value="Submit" style="padding: 10px 20px; background-color: #4CAF50; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
            </div>
        </form>
    </div>
</details>

<script>
function validateForm() {
    const name = document.getElementById('name').value.trim();
    const url = document.getElementById('url').value.trim();
    const frequency = document.getElementById('frequency').value;
    const timeout = document.getElementById('timeout').value;
    const objectConfidence = document.getElementById('object_confidence').value;

    if (name === "" || url === "") {
        alert("Template Name and URL are required fields.");
        return false;
    }

    if (frequency < 1) {
        alert("Frequency must be at least 1 minute.");
        return false;
    }

    if (timeout < 1) {
        alert("Timeout must be at least 1 second.");
        return false;
    }

    if (objectConfidence !== "" && (objectConfidence < 0 || objectConfidence > 1)) {
        alert("Object Confidence must be between 0 and 1.");
        return false;
    }

    return true;
}
</script>


    <div class="controls-container">
        <div class="filter-controls">
            <label for="group-dropdown">Filter by Group:</label>
            <select id="group-dropdown">
                <!-- Options will be populated here -->
            </select>
        </div>

        <div class="layout-controls">
            <label for="grid-width-slider">Adjust Grid Size:</label>
            <input type="range" id="grid-width-slider" min="200" max="500" value="250" step="10">
            <span id="grid-width-value">250px</span>
        </div>

        <div class="playback-controls">
            <button id="play-all" class="control-button">Play All</button>
            <button id="stop-all" class="control-button">Stop All</button>
        </div>
    </div>

    <div id="template-list">
        <!-- Template list will be populated here -->
    </div>

    {% include 'footer.html' %}

    <script>
        const gridWidthSlider = document.getElementById('grid-width-slider');
        const gridWidthValue = document.getElementById('grid-width-value');
        const templateList = document.getElementById('template-list');

        gridWidthSlider.addEventListener('input', function() {
            const value = this.value + 'px';
            gridWidthValue.textContent = value;
            templateList.style.setProperty('--grid-item-width', value);
        });
    </script>
</body>
</html>

